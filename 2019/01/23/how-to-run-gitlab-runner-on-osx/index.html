<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="6K"><title>如何在 OSX 上运行 GitLab Runner · 6K</title><meta name="description" content="搭建 GitLab Pages 时用到了 GitLab CI/CD 持续集成，需要一个 Runner 来执行任务。尽管按照官方文档搭建，还是遇到了一些坑。。。

安装 gitlab-ci-multi-runner如果安装文档进行安装，会默认安装最新版本的 runner，但现在的私建 GitLab 版"><meta name="keywords"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/blog/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/blog/css/style.css"><link rel="stylesheet" href="/blog/css/blog_basic.css"><link rel="stylesheet" href="/blog/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/blog/images/avatar.png" style="width:150px;"><h3 title=""><a href="/">6K</a></h3><div class="description"><p>认真做事 低调做人</p></div></div></div><ul class="social-links"></ul></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/blog/">首页</a></li><li><a href="https://l19861225q.github.io/blog/archives">归档</a></li></div><div class="information"><div class="back_btn"><li><a onclick="window.history.go(-1)" class="fa fa-chevron-left"></a></li></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>如何在 OSX 上运行 GitLab Runner</a></h3></div><div class="post-content"><p>搭建 GitLab Pages 时用到了 GitLab CI/CD 持续集成，需要一个 Runner 来执行任务。<br>尽管按照官方文档搭建，还是遇到了一些坑。。。</p>
<a id="more"></a>
<h2 id="安装-gitlab-ci-multi-runner"><a href="#安装-gitlab-ci-multi-runner" class="headerlink" title="安装 gitlab-ci-multi-runner"></a>安装 <a href="https://github.com/ayufan/gitlab-ci-multi-runner" target="_blank" rel="noopener">gitlab-ci-multi-runner</a></h2><p>如果安装<a href="https://github.com/ayufan/gitlab-ci-multi-runner/blob/master/docs/install/osx.md" target="_blank" rel="noopener">文档</a>进行安装，会默认安装最新版本的 runner，但现在的私建 GitLab 版本是 8.x，两者不匹配，要指定安装版本。</p>
<h3 id="安装-1-11-2-版本"><a href="#安装-1-11-2-版本" class="headerlink" title="安装 1.11.2 版本"></a>安装 1.11.2 版本</h3><p><a href="https://gitlab-ci-multi-runner-downloads.s3.amazonaws.com/v1.11.2/index.html" target="_blank" rel="noopener">GiLab Runnder Release for 1.11.2</a></p>
<p>从上面的网站里下载 <code>binaries/gitlab-ci-multi-runner-darwin-amd64</code> 到本地，然后执行<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cp gitlab-ci-multi-runner-darwin-amd64  /usr/<span class="built_in">local</span>/bin/gitlab-ci-multi-runner</span><br><span class="line">$ chmod +x /usr/<span class="built_in">local</span>/bin/gitlab-ci-multi-runner</span><br></pre></td></tr></table></figure></p>
<h3 id="注册一个-Runner"><a href="#注册一个-Runner" class="headerlink" title="注册一个 Runner"></a>注册一个 Runner</h3><p>执行 <code>gitlab-ci-multi-runner register</code> 然后根据提示输入即可完成注册<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Please enter the gitlab-ci coordinator URL (e.g. https://gitlab.com )</span><br><span class="line">Please enter the gitlab-ci token <span class="keyword">for</span> this runner</span><br></pre></td></tr></table></figure></p>
<p>上述两个问题的答案，从项目的 runners 配置里找<br><img src="/blog/2019/01/23/how-to-run-gitlab-runner-on-osx/runners.png"><br><img src="/blog/2019/01/23/how-to-run-gitlab-runner-on-osx/url-token.png"></p>
<p>到了选择 executor 这步<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Please enter the executor:</span><br></pre></td></tr></table></figure></p>
<p>因为是搭建静态网站服务器，选择 <code>shell</code> 即可，一切从简，其他选项还需要额外的配置。<br>注册以后，刷新刚才的页面，一个 runner 被关联了进来。<br><img src="/blog/2019/01/23/how-to-run-gitlab-runner-on-osx/active.png"></p>
<h3 id="将-Runner-安装到服务列表"><a href="#将-Runner-安装到服务列表" class="headerlink" title="将 Runner 安装到服务列表"></a>将 Runner 安装到服务列表</h3><p>执行 <code>gitlab-ci-multi-runner install</code></p>
<h3 id="启动服务"><a href="#启动服务" class="headerlink" title="启动服务"></a>启动服务</h3><p>执行 <code>gitlab-ci-multi-runner start</code></p>
<p>至此，一个 GitLab runner 就运行起来了，更多用法可参考<a href="https://github.com/ayufan/gitlab-ci-multi-runner/blob/master/docs/commands/README.md" target="_blank" rel="noopener">官方文档</a>。</p>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2019-01-23</span><i class="fa fa-tag"></i><a href="/blog/categories/git/" title="git" class="tag">git </a><a href="/blog/tags/gitlab/" title="gitlab" class="tag">gitlab </a></div></div></div></div><div class="share"><div class="evernote"><a href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank" class="fa fa-bookmark"></a></div><div class="weibo"><a href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));" class="fa fa-weibo"></a></div><div class="twitter"><a href="http://twitter.com/home?status=,https://l19861225q.github.io/blog/2019/01/23/how-to-run-gitlab-runner-on-osx/,6K,如何在 OSX 上运行 GitLab Runner,;" class="fa fa-twitter"></a></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a role="navigation" href="/blog/2019/02/02/how-to-config-gitlab-ci/" title="如何配置 GitLab CI" class="btn">上一篇</a></li><li class="next pagbuttons"><a role="navigation" href="/blog/2018/12/30/summary-of-2018/" title="2018 年的总结" class="btn">下一篇</a></li></ul></div></div></div></div></div><script src="/blog/js/jquery.js"></script><script src="/blog/js/jquery-migrate-1.2.1.min.js"></script><script src="/blog/js/jquery.appear.js"></script></body></html>